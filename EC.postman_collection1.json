{"info": {"_postman_id": "9ccd0e5c-7884-4f17-b827-2b61cd712239", "name": "EC", "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"}, "item": [{"name": "\u767b\u5165", "event": [{"listen": "prerequest", "script": {"exec": [""], "type": "text/javascript"}}, {"listen": "test", "script": {"exec": ["pm.test(\"\u56de\u50b3\u6210\u529f 200\", function () {\r", "    pm.response.to.have.status(200);\r", "});\r", "\r", "pm.test(\"\u6e2c\u8a66\u5b58\u5165token\", function () {\r", "    var jsonData = pm.response.json();\r", "    pm.globals.set(\"token\", jsonData.data.userToken);\r", "});\r", ""], "type": "text/javascript"}}], "request": {"method": "POST", "header": [], "body": {"mode": "raw", "raw": "{\r\n  \"data\": {\r\n    \"id\": \"wei\",\r\n    \"password\": \"12345678\"\r\n  }\r\n}", "options": {"raw": {"language": "json"}}}, "url": {"raw": "https://localhost:5001/Auth/sales/login", "protocol": "https", "host": ["localhost"], "port": "5001", "path": ["Auth", "sales", "login"]}}, "response": []}, {"name": "\u65b0\u589e\u8cfc\u7269\u8eca\u6e2c\u8a66\u8cc7\u6599", "event": [{"listen": "prerequest", "script": {"exec": ["var arrangedData=[{'goodsId': '2839796000161', 'quantity': 1}, {'goodsId': '2839796000211', 'quantity': 1}, {'goodsId': '2839796000041', 'quantity': 1}]\n\n        arrangedData.forEach(function(item, i) {\n        var data = { data : item};\n        data = JSON.stringify(data);\n        pm.sendRequest({\n                url : \"https://localhost:5001/Carts\",\n                method : \"POST\",\n                header: {\n                    'Authorization': 'bearer ' + pm.globals.get(\"token\"),\n                    \"Content-Type\": \"application/json\"\n                },\n                body : data\n            }, function (err, response) {\n\n            });\n        });\n    "], "type": "text/javascript"}}, {"listen": "test", "script": {"exec": ["pm.test(\"\u6210\u529f\u7372\u53d6\u8a02\u55ae\", function () {\r", "    pm.response.to.have.status(200);\r", "\r", "      pm.sendRequest({\r", "        url : \"https://localhost:5001/Checkout\",\r", "        method : \"POST\",\r", "        header: {\r", "            'Authorization': 'bearer ' + pm.globals.get(\"token\"),\r", "            \"Content-Type\": \"application/json\"\r", "        },\r", "        body : {}\r", "    }, function (err, response) {\r", "        var json = response.json();\r", "        console.log(\"\u8a02\u55ae\u7de8\u865f:\", json.data );\r", "        \r", "    });\r", "    // pm.globals.set(\"orderId\", \"\");\r", "});\r", "\r", ""], "type": "text/javascript"}}], "request": {"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]}, "method": "GET", "header": [], "url": {"raw": "https://localhost:5001/Carts", "protocol": "https", "host": ["localhost"], "port": "5001", "path": ["Carts"]}}, "response": []}]}